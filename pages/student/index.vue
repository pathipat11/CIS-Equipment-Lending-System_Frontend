<template>
    <div class="p-6 space-y-6">
        <h1 class="text-2xl font-bold">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ üë®‚Äçüéì</h1>

        <div class="grid md:grid-cols-2 gap-4">
            <!-- ‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå -->
            <div class="border p-4 rounded shadow">
                <h2 class="text-lg font-semibold mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</h2>
                <ul class="divide-y">
                    <li v-for="item in equipmentList.slice(0, 5)" :key="item.id" class="py-2">
                        {{ item.name }} - <span :class="item.status === '‡∏ß‡πà‡∏≤‡∏á' ? 'text-green-600' : 'text-red-600'">
                            {{ item.status }}
                        </span>
                    </li>
                </ul>
                <NuxtLink to="/student/borrow" class="text-blue-500 underline">+ ‡∏¢‡∏∑‡∏°‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</NuxtLink>
            </div>

            <!-- ‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå -->
            <div class="border p-4 rounded shadow">
                <h2 class="text-lg font-semibold mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</h2>
                <ul class="divide-y">
                    <li v-for="item in supplyList.slice(0, 5)" :key="item.id" class="py-2">
                        {{ item.name }} - ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ {{ item.quantity }}
                    </li>
                </ul>
                <NuxtLink to="/student/borrow-supply" class="text-blue-500 underline">+ ‡∏¢‡∏∑‡∏°‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</NuxtLink>
            </div>
        </div>
    </div>
</template>

<script setup>
import { useEquipment } from '@/composables/equipment'
import { useSupply } from '@/composables/supply'

const { equipmentList, fetchEquipment } = useEquipment()
const { supplyList, fetchSupply } = useSupply()

onMounted(() => {
    fetchEquipment()
    fetchSupply()
})

definePageMeta({
    middleware: ['auth'],
    layout: 'student', // ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ layout: 'student' ‡∏´‡∏≤‡∏Å‡∏°‡∏µ layout ‡πÅ‡∏¢‡∏Å
})
</script>